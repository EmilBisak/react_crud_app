(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,a){e.exports=a(49)},34:function(e,t,a){},38:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(17),s=a.n(l),i=(a(34),a(7)),c=a(8),o=a(10),m=a(9),u=a(11),d=(a(36),a(53)),h=a(54),g=a(51),p=(a(38),a(15)),E=a(28),f=a(50),v="https://reqres.in",N=v+"/api/login",b=v+"/api/users?page=",w=v+"/api/users",S=function(){return r.a.createElement("main",{className:"loading-holder"},r.a.createElement("img",{src:"https://i.gifer.com/7YQl.gif",className:"responsive-img",alt:"loading"}))},_=function(e){return function(t){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={authToken:""},t.userLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fetch(N,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic"+t.state.authToken},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return t.setState({authToken:e.token}),localStorage.setItem("authToken",e.token),console.log(t.state),e}).catch(function(e){return console.log(e)})},t.getAuth=function(){return t.state.authToken?t.state.authToken:localStorage.getItem("authToken")},t.goToPage=function(e){return t.props.history.push({pathname:e})},t}return Object(u.a)(a,t),Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{userLogin:this.userLogin,authToken:this.state.authToken,goToPage:this.goToPage,getAuth:this.getAuth}))}}]),a}(n.Component)},O=_(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onFormSubmitHandler=function(e){e.preventDefault()},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isModalActive,a=e.user,n=e.firstName,l=e.lastName,s=e.closeModal,i=e.handleInput,c=e.editUser;return t?r.a.createElement("div",{className:"modal-holder"},r.a.createElement("div",{id:"modal",className:"modal open"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onFormSubmitHandler},r.a.createElement("div",{className:"row"},r.a.createElement("img",{src:a.data.avatar,alt:"avatar",className:"circle"}),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"firstName",type:"text",className:"validate",defaultValue:a.data.first_name,autoFocus:!0,onChange:i}),r.a.createElement("label",{htmlFor:"firstName"},"First Name"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"lastName",type:"text",className:"validate",defaultValue:a.data.last_name,autoFocus:!0,onChange:i}),r.a.createElement("label",{htmlFor:"lastName"},"Last Name"))),r.a.createElement("button",{className:"btn waves-effect waves-light",type:"button",name:"action",onClick:function(){return c({first_name:n||a.data.first_name,last_name:l||a.data.last_name},a.data.id)}},"Edit User",r.a.createElement("i",{className:"material-icons right"},"edit")),r.a.createElement("button",{className:"btn waves-effect waves-light red lighten-1 right",type:"submit",name:"action",onClick:s},"Cancel",r.a.createElement("i",{className:"material-icons left"},"cancel")),r.a.createElement("p",{className:"red-text"})))))):null}}]),t}(n.Component)),k=_(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={users:"",user:"",loading:!0,pageNumber:1,isModalActive:!1,filtered:[],sortToggle:!1,first_name_edited:"",last_name_edited:"",edited_user_id:"",deleted_user_id:[],isUserDeleted:!1},a.getUsers=function(e){a.setState({loading:!0}),fetch(b+e).then(function(e){return e.json()}).then(function(e){return a.setState({users:e,filtered:e,loading:!1})}).catch(function(e){return a.setState({loading:!0,errorMsg:e})})},a.getUser=function(e){a.setState({loading:!0}),fetch(w+"/"+e).then(function(e){return e.json()}).then(function(e){return a.setState({user:e,loading:!1,isModalActive:!0})}).catch(function(e){return a.setState({loading:!0,errorMsg:e})})},a.editUser=function(e,t){return a.closeModal(),a.setState({loading:!0}),fetch(w+"/"+t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Basic"+a.props.getAuth()},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){a.setState({loading:!1,firstName:"",lastName:"",first_name_edited:e.first_name,last_name_edited:e.last_name,edited_user_id:t}),console.log("== User with id-".concat(t," is updated =="),e)}).catch(function(e){return a.setState({loading:!0,errorMsg:e})})},a.deleteUser=function(e){return a.setState({loading:!0}),fetch(w+"/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Basic"+a.props.getAuth()}}).then(function(t){a.setState({loading:!1,isUserDeleted:!0,deleted_user_id:[].concat(Object(E.a)(a.state.deleted_user_id),[e])}),console.log("== User with id-".concat(e," is deleted =="),t)}).catch(function(e){return a.setState({loading:!0,errorMsg:e})})},a.sortByAtoZAsc=function(){var e=a.state.users.data.sort(function(e,t){var a=e.first_name.toLowerCase(),n=t.first_name.toLowerCase();return a<n?-1:n<a?1:0});a.setState({filtered:e})},a.sortById=function(){var e=a.state.users.data.sort(function(e,t){var a=e.id,n=t.id;return a<n?-1:n<a?1:0});a.setState({filtered:e})},a.toggleSort=function(){a.setState({toggleSort:!a.state.toggleSort},function(){a.state.toggleSort?a.sortByAtoZAsc():a.sortById()})},a.createPaginatinBtns=function(){for(var e=a.state,t=e.pageNumber,n=e.users,l=[],s=0;s<n.total/n.per_page;s++){var i=s+1,c=r.a.createElement("li",{key:"pageNum_"+i,className:t===i?"active orange darken-3":"waves-effect",onClick:a.pagination},r.a.createElement(f.a,{to:"/users",replace:!0},i));l.push(c)}return l},a.pagination=function(e){var t=a.state,n=t.pageNumber,r=t.users,l=parseInt(e.target.innerHTML);isNaN(l)?"chevron_left"===e.target.innerHTML&&n>1?(l=n,l--,a.setState({pageNumber:l}),a.getUsers(l)):"chevron_right"===e.target.innerHTML&&n<r.total/r.per_page&&(l=n,l++,a.setState({pageNumber:l}),a.getUsers(l)):(a.setState({pageNumber:l}),a.getUsers(l))},a.openUser=function(e){var t=0;"LI"===e.target.parentNode.tagName?t=e.target.parentNode.children[4].innerHTML:"UL"===e.target.parentNode.tagName&&(t=e.target.children[4].innerHTML),a.getUser(t)},a.deleteUserHandler=function(e){e.stopPropagation(),a.deleteUser(e.target.parentNode.parentNode.children[4].innerHTML)},a.closeModal=function(){a.setState({isModalActive:!1})},a.handleInput=function(e){var t=e.target;a.setState(Object(p.a)({},t.id,t.value))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getUsers(this.state.pageNumber)}},{key:"render",value:function(){var e=this,t=this.state,a=t.pageNumber,n=t.users,l=t.user,s=t.loading,i=t.isModalActive,c=t.firstName,o=t.lastName,m=t.edited_user_id,u=t.first_name_edited,d=t.last_name_edited,h=t.deleted_user_id,g=t.isUserDeleted,p=n?n.data.map(function(t){var a=m===t.id;return r.a.createElement("li",{className:g&&h.includes("".concat(t.id))?"hide":"collection-item avatar transparent",key:t.id,onClick:e.openUser},r.a.createElement("img",{src:t.avatar,alt:"avatar",className:"circle"}),r.a.createElement("span",{className:"btn-floating waves-effect waves-light red lighten-1 right delete-button",onClick:e.deleteUserHandler},r.a.createElement("i",{className:"material-icons"},"clear")),r.a.createElement("p",null,a?u:t.first_name),r.a.createElement("p",null,a?d:t.last_name),r.a.createElement("span",{className:"title right"},t.id))}):r.a.createElement(S,null);return s?r.a.createElement(S,null):r.a.createElement("main",{id:"main"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl10 offset-xl1"},r.a.createElement("h2",{className:"center users"},"Users"),r.a.createElement("div",{className:"switch center"},r.a.createElement("h6",null,"Sort Users"),r.a.createElement("div",{id:"sort-holder"},r.a.createElement("label",null,"By Id",r.a.createElement("input",{type:"checkbox"}),r.a.createElement("span",{className:"lever",onClick:this.toggleSort}),"By Name"))),r.a.createElement(O,{isModalActive:i,user:l,firstName:c,lastName:o,closeModal:this.closeModal,handleInput:this.handleInput,editUser:this.editUser}),r.a.createElement("ul",{className:"collection",id:"collection"},p),r.a.createElement("ul",{className:"pagination center"},r.a.createElement("li",{className:1===a?"disabled":"waves-effect",onClick:this.pagination},r.a.createElement(f.a,{to:"/users",replace:!0},r.a.createElement("i",{className:"material-icons"},"chevron_left"))),this.createPaginatinBtns(),r.a.createElement("li",{className:4===a?"disabled":"waves-effect",onClick:this.pagination},r.a.createElement(f.a,{to:"/users",replace:!0},r.a.createElement("i",{className:"material-icons"},"chevron_right"))))))))}}]),t}(n.Component)),y=a(27),j=(a(46),_(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={first_name:"",last_name:"",email:"",tel:"",date:new Date,emailErr:"",phoneErr:"",showPhoneErr:!1,showEmailErr:!1,maskPhoneFormat:""},a.createUser=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fetch(w,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic"+a.props.getAuth()},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){console.log(e),alert("New user is created at ".concat(e.createdAt,". \n                        User data:\n                        id ").concat(e.id,", \n                        name ").concat(e.name,", \n                        tel ").concat(e.tel,", \n                        dateOfBirth ").concat(e.dateOfBirth," "))})},a.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},a.validatePhone=function(e){return/^(1\s|1|)?((\(\d{3}\))|\d{3})(-|\s)?(\d{3})(-|\s)?(\d{4})$/.test(""+e)},a.maskPhoneFormat=function(e){for(var t=(""+e.target.value).split(""),n=[],r=0;r<t.length;r++)0===r?n[0]="(":3===r&&(n[4]=")"),n.push(t[r]);a.setState({maskPhoneFormat:n.join("")})},a.onFormSubmitHandler=function(e){e.preventDefault();var t=a.state,n=t.first_name,r=t.last_name,l=t.email,s=t.tel,i=t.date,c=t.showPhoneErr,o=t.showEmailErr;c||o||""===n||""===r||(a.createUser({name:n+" "+r,job:"leader",email:l,tel:s,dateOfBirth:i}),a.resetState(),a.props.goToPage("/users"))},a.onChangeInputHandler=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value)),"email"===e.target.name&&(a.validateEmail(e.target.value)||""===e.target.value?a.setState({showEmailErr:!1}):a.setState({emailErr:"Invalid email input",showEmailErr:!0})),"tel"===e.target.name&&(a.validatePhone(e.target.value)||""===e.target.value?(a.setState({showPhoneErr:!1}),e.target.value=a.state.maskPhoneFormat):a.setState({phoneErr:"Invalid phone input, input must have 10 digits.",showPhoneErr:!0}))},a.dateHandleChange=function(e){a.setState({date:e})},a.dateHandleSelect=function(e){a.setState({date:e})},a.resetState=function(){a.setState({first_name:"",last_name:"",email:"",tel:"",date:new Date,emailErr:"",phoneErr:"",showPhoneErr:!1,showEmailErr:!1,maskPhoneFormat:""})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showEmailErr,a=e.emailErr,n=e.phoneErr,l=e.showPhoneErr;return r.a.createElement("main",{id:"create-user-main"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onFormSubmitHandler},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("input",{id:"first_name",name:"first_name",type:"text",className:"validate",onChange:this.onChangeInputHandler,autoFocus:!0}),r.a.createElement("label",{htmlFor:"first_name"},"First Name")),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("input",{id:"last_name",name:"last_name",type:"text",className:"validate",onChange:this.onChangeInputHandler}),r.a.createElement("label",{htmlFor:"last_name"},"Last Name"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.onChangeInputHandler,required:!0}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("p",{className:"error-msg ".concat(t?"":"hide")},a))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{id:"tel",name:"tel",type:"tel",className:"validate",onBlur:this.onChangeInputHandler,onChange:this.maskPhoneFormat,required:!0}),r.a.createElement("label",{htmlFor:"tel"},"Phone Number"),r.a.createElement("p",{className:"error-msg ".concat(l?"":"hide")},n))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("p",{className:"datepicker-title"},"Date Of Birth"),r.a.createElement(y.a,{selected:this.state.date,onSelect:this.dateHandleSelect,onChange:this.dateHandleChange})),r.a.createElement("div",{className:"col s6",id:"new-user-button-holder"},r.a.createElement("button",{onClick:this.onCreateNewUser,className:"btn waves-effect waves-light disable",type:"submit",name:"action"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send"))))))))}}]),t}(n.Component))),C=_(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",emailErr:"",passErr:"",showEmailErr:!1,showPassErr:!1,showErr:!1,authToken:""},a.validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},a.onChangeInputHandler=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value)),"email"===e.target.name&&(a.validateEmail(e.target.value)||""===e.target.value?a.setState({showEmailErr:!1}):a.setState({emailErr:"Invalid email input",showEmailErr:!0})),"password"===e.target.name&&(e.target.value.length<6&&""!==e.target.value?a.setState({passErr:"Password has to be at least 6 characters long",showPassErr:!0}):a.setState({showPassErr:!1}))},a.onFormSubmitHandler=function(e){var t=a.state,n=t.email,r=t.password,l=a.props,s=l.userLogin,i=l.goToPage;e.preventDefault(),s({email:n,password:r}).then(function(e){e.token&&i("/logedIn")})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.emailErr,a=e.passErr,n=e.showEmailErr,l=e.showPassErr;return r.a.createElement("main",{id:"main-login",className:"indigo accent-2"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s0 m3"}),r.a.createElement("div",{className:"col s12 m6 login-holder"},r.a.createElement("div",{className:"z-depth-4 card",id:"login-card"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 center login-title-holder"},r.a.createElement("img",{src:"/logo.png",alt:"",className:"circle responsive-img valign profile-image-login"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"}," ",r.a.createElement("h6",null,"LOGIN")),r.a.createElement("form",{className:"col s12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("i",{className:"material-icons prefix pt-5"},"email"),r.a.createElement("input",{id:"email",type:"email",className:"validate",name:"email",onChange:this.onChangeInputHandler,required:!0}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("p",{className:"error-msg ".concat(n?"":"hide")},t))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12 "},r.a.createElement("i",{className:"material-icons prefix pt-5"},"lock_outline"),r.a.createElement("input",{id:"password",type:"password",className:"validate",name:"password",onChange:this.onChangeInputHandler,required:!0}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("p",{className:"error-msg ".concat(l?"":"hide")},a))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("button",{className:"btn waves-effect waves-light col s12 orange darken-2",onClick:this.onFormSubmitHandler},"Login"))))))))))}}]),t}(n.Component)),U=a(26),T=a.n(U),A=a(12),P=_(function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).logOut=function(e){e.preventDefault(),localStorage.removeItem("authToken"),Object(A.a)().push("/")},e.hamburgerBtn=r.a.createRef(),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){T.a.Sidenav.init(this.hamburgerBtn.current)}},{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("nav",{className:"indigo accent-2"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(f.a,{to:"/",className:"brand-logo center",replace:!0},"CRUD Users App"),r.a.createElement(f.a,{to:"/","data-target":"mobile-demo",className:"sidenav-trigger",replace:!0},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{className:"left hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement(f.a,{to:"",replace:!0,onClick:this.logOut},r.a.createElement("i",{className:"material-icons left"},"power_settings_new"),"Log Out")),r.a.createElement("li",null,r.a.createElement(f.a,{to:"/users",replace:!0},r.a.createElement("i",{className:"material-icons left"},"people"),"Users")),r.a.createElement("li",null,r.a.createElement(f.a,{to:"/create_user",replace:!0},r.a.createElement("i",{className:"material-icons left"},"person_add"),"Create user"))))),r.a.createElement("ul",{className:"sidenav",id:"mobile-demo",ref:this.hamburgerBtn},r.a.createElement("li",null,r.a.createElement(f.a,{to:"/users",replace:!0},r.a.createElement("i",{className:"material-icons right"},"people"),"Users")),r.a.createElement("li",null,r.a.createElement(f.a,{to:"/create_user",replace:!0},r.a.createElement("i",{className:"material-icons right"},"person_add"),"Create user")),r.a.createElement("li",null,r.a.createElement(f.a,{to:"",replace:!0,onClick:this.logOut},r.a.createElement("i",{className:"material-icons right"},"power_settings_new"),"Log Out"))))}}]),t}(n.Component)),I=function(){return r.a.createElement("footer",{className:"page-footer indigo accent-2 center",id:"main-footer"},r.a.createElement("small",null,"\xa9 ",(new Date).getFullYear()," Copyright Emil Bisak"))},F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).isLogedIn=function(){return localStorage.getItem("authToken")&&"undefined"!==localStorage.getItem("authToken")},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.isLogedIn()?r.a.createElement(n.Fragment,null,r.a.createElement(P,null),r.a.createElement(d.a,null,r.a.createElement(h.a,{exact:!0,path:"/users",component:k}),r.a.createElement(h.a,{path:"/create_user",component:j}),r.a.createElement(g.a,{path:"/",to:"/users"})),r.a.createElement(I,null)):r.a.createElement(d.a,null,r.a.createElement(h.a,{exact:!0,path:"/",component:C}))}}]),t}(n.Component),H=a(52);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(H.a,null,r.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.9c375edf.chunk.js.map